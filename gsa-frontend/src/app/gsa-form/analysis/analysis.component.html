<div [formGroup]="analysisStep">
  <div class="flex-container horizontal gap-one ">
    <mat-card class="flex-one">
      <div class="flex-container align-start vertical content-height">
        <h2 class="flex-one">Analysis</h2>
        <div class="flex-container vertical align-center justify-center height-hundred width-hundred flex-twelve">
          <div [ngSwitch]="analysisService.analysisLoadingStatus?.status">
            <div *ngSwitchCase="'running'">
              <div class="flex-container horizontal align-center gap-one">
                <div class="spinner-box">
                  <mat-spinner diameter="24"></mat-spinner>
                </div>
                Analysis loading!
              </div>
            </div>
            <div *ngSwitchCase="'failed'"
                 class="flex-container horizontal align-center">
              <div class="material-icons mat-error big-error">error</div>
              <div class="text-margin">{{analysisService.analysisLoadingStatus!.description}}</div>
            </div>
            <div *ngSwitchCase="'complete'">
              <div class="flex-container vertical align-center gap-one">
                <div>Congratulations, your analysis has finished!</div>
                <form target="_blank">
                  <button color="primary" formaction="{{analysisService.resultURL}}" mat-raised-button>
                    <mat-icon><span class="material-icons-outlined">
                    visibility
                  </span></mat-icon>
                    Results
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <mat-card-footer>
        <div class="grey description-height">{{analysisService.analysisLoadingStatus?.description}}</div>

        <mat-progress-bar class="progress-height" mode="determinate"
                          value="{{analysisService.analysisLoadingStatus?.completed! * 100}}"></mat-progress-bar>
      </mat-card-footer>
    </mat-card>


    <mat-card *ngIf="analysisService.createReports" class="flex-one ">
      <div class="content-height">
        <h2>Report</h2>
        <div class="flex-container vertical align-center justify-center">
          <div [ngSwitch]="analysisService.reportLoadingStatus?.status">
            <div *ngSwitchCase="'running'">
              Report loading!
            </div>
            <div *ngSwitchCase="'failed'"
                 class="flex-container horizontal align-center">
              <div class="material-icons mat-error big-error">error</div>
              <div class="text-margin">{{analysisService.reportLoadingStatus!.description}}</div>
            </div>
            <div *ngSwitchCase="'complete'">
              <div class="flex-container vertical align-center gap-one">

                <div>Click for some nice reports</div>
                <div class="flex-container horizontal gap-one">
                  <div *ngFor="let report of analysisService.reportLoadingStatus?.reports">
                    <form target="_blank">
                      <button color="primary" formaction="{{report.url}}" mat-raised-button>
                        <mat-icon><span class="material-icons-outlined">
                    picture_as_pdf
                  </span></mat-icon>
                        {{report.name}}
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <mat-card-footer>
        <div class="grey description-height">{{analysisService.reportLoadingStatus?.description}}</div>
        <mat-progress-bar class="progress-height" mode="determinate"
                          value="{{analysisService.reportLoadingStatus?.completed! * 100}}"></mat-progress-bar>
      </mat-card-footer>
    </mat-card>
  </div>
</div>
