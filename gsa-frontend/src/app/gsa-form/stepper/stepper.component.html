<div class="stepper">
  <mat-vertical-stepper #stepper>
    <mat-step [stepControl]="form1"  #addMethod>
      <ng-template matStepLabel>Select method</ng-template>
      <gsa-analysis-methods  *ngIf="stepper.selected == null || stepper.selected == addMethod"></gsa-analysis-methods>
      <button mat-raised-button color="accent" matStepperNext [disabled]="methods.selectedMethod === undefined" >
        Continue
      </button>
    </mat-step>
    <mat-step [stepControl]="form2" #addData>
      <ng-template matStepLabel>Add datasets</ng-template>
      <mat-accordion multi="false">
        <gsa-nested-stepper [numberDataset]="0" *ngIf="stepper.selected == addData"></gsa-nested-stepper>
        <div *ngFor="let data of analysisInformation.datasets; let i = index ">
          <gsa-nested-stepper [numberDataset]="i + 1" *ngIf="stepper.selected == addData"></gsa-nested-stepper>
        </div>
      </mat-accordion>
      <button mat-raised-button  color="accent" matStepperPrevious>Back</button>
      <button mat-raised-button color="accent" matStepperNext [disabled]="analysisInformation.datasets.length === 0">Continue</button>
    </mat-step>
    <mat-step [stepControl]="form3" #options>
      <ng-template matStepLabel>Options</ng-template>
      <gsa-options *ngIf="stepper.selected == options"></gsa-options>
      <button mat-raised-button  color="accent" matStepperPrevious>Back</button>
      <button mat-raised-button color="accent" (click)="this.analysisInformation.loadAnalysis()" matStepperNext>Start Analysis!</button>
    </mat-step>
    <mat-step [stepControl]="form4" #analysis>
      <ng-template matStepLabel>Analysis</ng-template>
      <gsa-analysis *ngIf="stepper.selected == analysis"></gsa-analysis>
    </mat-step>
  </mat-vertical-stepper>
</div>

