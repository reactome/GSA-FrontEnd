<div [formGroup]="statisticalDesignStep" class="flex-container gap-one horizontal full-width">

  <div>
    <h2>Select comparison factor</h2>
    <gsa-dropdown (value)="this.currentDataset.statisticalDesign!.analysisGroup = $event"
                  [options]="computeValidColumns()" [selection]="defaultValue(0)"
                  class="flex-one"></gsa-dropdown>
  </div>

  <div *ngIf="this.currentDataset.statisticalDesign?.analysisGroup !== undefined else disableGroupSelection">
    <h2>Set 1st group</h2>
    <gsa-dropdown (value)="this.currentDataset.statisticalDesign!.comparisonGroup1 = $event"
                  [options]="computeColumnValues(this.currentDataset.statisticalDesign!.analysisGroup)"
                  [selection]="defaultValue(1)"
                  class="flex-one"></gsa-dropdown>
    <h2>Set 2nd group</h2>
    <gsa-dropdown (value)="this.currentDataset.statisticalDesign!.comparisonGroup2 = $event"
                  [options]="computeColumnValues(this.currentDataset.statisticalDesign!.analysisGroup)"
                  [selection]="defaultValue(2)"
                  class="flex-one"></gsa-dropdown>
  </div>

  <ng-template #disableGroupSelection>
    <div>
      <h2 class="disabled">Set 1st group</h2>
      <gsa-dropdown [disabled]="true"></gsa-dropdown>
      <h2 class="disabled">Set 2nd group</h2>
      <gsa-dropdown [disabled]="true"></gsa-dropdown>
    </div>
  </ng-template>

  <div *ngIf="this.currentDataset.statisticalDesign?.analysisGroup !== undefined else disableCovariateSelection">
    <h2>Select covariates</h2>
    <section *ngFor="let col of computeValidColumns()" class="example-section">
      <mat-checkbox (change)="addCovariate($event, col)"
                    *ngIf="col !== this.currentDataset.statisticalDesign?.analysisGroup"
                    [checked]="this.currentDataset.statisticalDesign?.covariances?.indexOf(col) !== -1"
                    class="example-margin"
                    color="primary">{{col}}</mat-checkbox>
    </section>
  </div>
  <ng-template #disableCovariateSelection>
    <div>
      <h2 class="disabled">Select covariates</h2>
      <section *ngFor="let col of computeValidColumns()" class="example-section">
        <mat-checkbox disabled="true">{{col}}</mat-checkbox>
      </section>
    </div>
  </ng-template>
</div>
